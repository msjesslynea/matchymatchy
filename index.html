<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MUET Task 2: Reason vs. Method</title>

  <!-- ‚úÖ Correct CDNs (no markdown brackets) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root { color-scheme: light; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }

    /* Gen Z vibe: gradient + floating blobs */
    .grotesk { font-family: "Space Grotesk", Inter, system-ui, sans-serif; }
    .bg-aurora {
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(45,212,191,.30), transparent 60%),
        radial-gradient(800px 500px at 90% 20%, rgba(99,102,241,.25), transparent 55%),
        radial-gradient(700px 500px at 40% 95%, rgba(244,114,182,.22), transparent 60%),
        linear-gradient(180deg, #f8fafc 0%, #f1f5f9 40%, #eef2ff 100%);
    }

    .glass {
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border: 1px solid rgba(148,163,184,.35);
      box-shadow: 0 10px 30px rgba(2,6,23,.08);
    }

    .chip {
      border: 1px solid rgba(255,255,255,.35);
      background: rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* Buttons */
    .btn {
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
    }
    .btn:active { transform: scale(.98); }
    .btn:hover { box-shadow: 0 12px 25px rgba(2,6,23,.12); }

    /* Animated entrance */
    .fade-in { animation: fadeIn .35s ease-out; }
    @keyframes fadeIn { from { opacity:0; transform: translateY(8px);} to { opacity:1; transform: translateY(0);} }

    /* Confetti (simple + lightweight) */
    .confetti {
      position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 9999;
    }
    .confetti i {
      position: absolute; top: -10px;
      width: 10px; height: 18px; border-radius: 3px;
      animation: fall 1.2s linear forwards;
      opacity: .9;
    }
    @keyframes fall {
      to { transform: translateY(110vh) rotate(560deg); opacity: 0.95; }
    }

    /* Inputs */
    textarea, input {
      outline: none;
    }
    textarea:focus, input:focus {
      box-shadow: 0 0 0 4px rgba(45,212,191,.18);
      border-color: rgba(13,148,136,.6) !important;
    }

    /* Nice scrollbar for textarea */
    textarea::-webkit-scrollbar { width: 10px; }
    textarea::-webkit-scrollbar-track { background: rgba(226,232,240,.8); border-radius: 8px; }
    textarea::-webkit-scrollbar-thumb { background: rgba(148,163,184,.95); border-radius: 8px; }
    textarea::-webkit-scrollbar-thumb:hover { background: rgba(100,116,139,.95); }

    /* Loader */
    .loader { border: 3px solid rgba(255,255,255,.35); border-top: 3px solid #14b8a6; width: 20px; height: 20px; border-radius: 999px; animation: spin 1s linear infinite; display:inline-block; }
    @keyframes spin { to { transform: rotate(360deg);} }

    /* Tiny shake on wrong answer */
    .shake { animation: shake .28s ease-in-out; }
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
  </style>

  <script>
    // Optional: Tailwind config (keeps CDN but gives nicer defaults)
    tailwind.config = {
      theme: {
        extend: {
          borderRadius: { '2xl': '1.25rem' }
        }
      }
    }
  </script>
</head>

<body class="bg-aurora text-slate-900 min-h-screen flex flex-col">
  <!-- Top Nav -->
  <header class="sticky top-0 z-50">
    <div class="mx-auto max-w-4xl px-4 pt-4">
      <div class="glass rounded-2xl px-5 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="h-11 w-11 rounded-2xl grid place-items-center bg-gradient-to-br from-teal-400/90 to-indigo-400/80 text-white shadow-sm">
            <i class="fa-solid fa-pen-nib text-xl"></i>
          </div>
          <div>
            <h1 class="grotesk font-bold text-lg md:text-xl leading-tight">MUET Task 2: Writing Lab</h1>
            <p class="text-xs text-slate-600">Elaboration Skills ‚Ä¢ <span class="font-semibold text-teal-700">Why</span> vs <span class="font-semibold text-indigo-700">How</span></p>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <span class="chip text-xs font-semibold px-3 py-1 rounded-full text-white bg-gradient-to-r from-emerald-500/70 to-teal-500/70">
            Unit: Environment üåø
          </span>
        </div>
      </div>
    </div>
  </header>

  <main class="flex-grow w-full max-w-4xl mx-auto px-4 py-8 space-y-10">
    <!-- Intro Card -->
    <section class="glass rounded-2xl p-6">
      <div class="flex items-start justify-between gap-4">
        <div>
          <h2 class="grotesk text-xl font-bold mb-2">Quick vibe check: Why vs How</h2>
          <p class="text-sm text-slate-600">Tap your choice. Learn fast. Write sharper body paragraphs.</p>
        </div>
        <div class="hidden md:flex gap-2">
          <span class="chip px-3 py-1 rounded-full text-xs font-semibold text-slate-800">üí° 10 items</span>
          <span class="chip px-3 py-1 rounded-full text-xs font-semibold text-slate-800">‚úçÔ∏è 3 methods</span>
        </div>
      </div>

      <div class="grid md:grid-cols-2 gap-4 mt-5">
        <div class="rounded-2xl p-4 border border-blue-200/60 bg-gradient-to-br from-blue-50 to-white">
          <h3 class="grotesk font-bold text-blue-800 mb-1">Reason (Why)</h3>
          <p class="text-sm text-blue-700">Explains the logic / benefit / outcome.</p>
          <p class="text-xs text-blue-600 mt-2">Keyword vibe: <span class="font-semibold">because, so that, leads to</span></p>
        </div>

        <div class="rounded-2xl p-4 border border-emerald-200/60 bg-gradient-to-br from-emerald-50 to-white">
          <h3 class="grotesk font-bold text-emerald-800 mb-1">Method (How)</h3>
          <p class="text-sm text-emerald-700">Explains the steps / actions / process.</p>
          <p class="text-xs text-emerald-600 mt-2">Keyword vibe: <span class="font-semibold">by, through, using, first/next</span></p>
        </div>
      </div>
    </section>

    <!-- Quiz -->
    <section id="quiz-section">
      <div class="flex flex-wrap gap-3 items-center justify-between mb-4">
        <h2 class="grotesk text-2xl font-bold">Part 1: Swipe-style Quiz (tap)</h2>
        <div class="flex items-center gap-2">
          <span id="score-display" class="hidden text-xs font-mono px-3 py-1 rounded-full bg-slate-900 text-white">Score: 0/10</span>
          <span class="chip text-xs font-semibold px-3 py-1 rounded-full text-slate-800">No stress ‚Äî learn mode ‚úÖ</span>
        </div>
      </div>

      <div class="glass rounded-2xl overflow-hidden">
        <!-- top bar -->
        <div class="px-6 py-4 border-b border-slate-200/60 flex items-center justify-between">
          <div class="text-xs font-semibold text-slate-600 uppercase tracking-wider">
            Statement <span id="q-current" class="text-slate-900">1</span> of 10
          </div>
          <div class="w-40 h-2 bg-slate-200 rounded-full overflow-hidden">
            <div id="progress-bar" class="h-full bg-gradient-to-r from-teal-500 to-indigo-500 transition-all duration-300" style="width: 10%"></div>
          </div>
        </div>

        <div class="p-7 md:p-10 min-h-[320px] flex flex-col justify-center items-center text-center fade-in" id="question-container">
          <p id="question-text" class="grotesk text-xl md:text-2xl font-semibold text-slate-900 mb-7 leading-relaxed">
            Loading...
          </p>

          <div class="grid sm:grid-cols-2 gap-4 w-full max-w-xl" id="options-container">
            <button onclick="checkAnswer('Reason')" class="btn py-4 px-6 rounded-2xl border border-blue-200 bg-gradient-to-br from-white to-blue-50 hover:from-blue-50 hover:to-white text-blue-700 font-bold">
              Reason (Why) üí°
            </button>
            <button onclick="checkAnswer('Method')" class="btn py-4 px-6 rounded-2xl border border-emerald-200 bg-gradient-to-br from-white to-emerald-50 hover:from-emerald-50 hover:to-white text-emerald-700 font-bold">
              Method (How) üõ†Ô∏è
            </button>
          </div>

          <div id="feedback" class="hidden mt-7 w-full max-w-xl p-4 rounded-2xl text-left border"></div>

          <button id="next-btn" onclick="nextQuestion()" class="hidden btn mt-6 bg-slate-900 text-white px-8 py-3 rounded-2xl hover:bg-slate-950 font-semibold">
            Next <i class="fa-solid fa-arrow-right ml-2"></i>
          </button>
        </div>

        <div id="quiz-end" class="hidden p-10 text-center">
          <div class="mb-4">
            <div class="mx-auto h-16 w-16 rounded-2xl grid place-items-center bg-gradient-to-br from-yellow-300 to-pink-300 shadow-sm">
              <i class="fa-solid fa-trophy text-3xl text-slate-900"></i>
            </div>
            <h3 class="grotesk text-2xl font-bold text-slate-900 mt-4">Quiz completed üéâ</h3>
          </div>
          <p class="text-lg text-slate-700 mb-6">
            You scored <span id="final-score" class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-indigo-600 text-2xl">0</span> out of 10.
          </p>
          <button onclick="scrollToWriting()" class="btn bg-gradient-to-r from-teal-600 to-indigo-600 text-white px-8 py-3 rounded-2xl hover:opacity-95 shadow-md">
            Proceed to Writing Task ‚úçÔ∏è
          </button>
        </div>
      </div>
    </section>

    <!-- Writing -->
    <section id="writing-section" class="pt-4">
      <div class="glass rounded-2xl p-6 border border-slate-200/60">
        <div class="flex flex-wrap items-center justify-between gap-3 mb-3">
          <h2 class="grotesk text-2xl font-bold">Part 2: Writing Application</h2>
          <span class="chip px-3 py-1 rounded-full text-xs font-semibold text-slate-800">Write METHODS only üõ†Ô∏è</span>
        </div>
        <div class="rounded-2xl p-4 border border-orange-200 bg-gradient-to-br from-orange-50 to-white text-sm text-orange-900">
          <span class="font-bold">Topic:</span> Compulsory Recycling in Schools ‚ôªÔ∏è
        </div>

        <div class="space-y-5 mt-6">
          <!-- Card 1 -->
          <div class="rounded-2xl p-5 border border-slate-200 bg-white/70">
            <p class="text-slate-900 font-semibold mb-3">
              <span class="text-[11px] font-extrabold text-slate-500 uppercase block">Reason 1</span>
              To instill lifelong habits of sustainability.
            </p>
            <textarea id="input-1" rows="3" class="w-full border border-slate-300 rounded-2xl p-4 bg-white" placeholder="Write your Method (How)‚Ä¶ e.g., By introducing a weekly recycling routine with roles and checkpoints."></textarea>
          </div>

          <!-- Card 2 -->
          <div class="rounded-2xl p-5 border border-slate-200 bg-white/70">
            <p class="text-slate-900 font-semibold mb-3">
              <span class="text-[11px] font-extrabold text-slate-500 uppercase block">Reason 2</span>
              To reduce the school‚Äôs carbon footprint.
            </p>
            <textarea id="input-2" rows="3" class="w-full border border-slate-300 rounded-2xl p-4 bg-white" placeholder="Write your Method (How)‚Ä¶ e.g., By separating waste and reducing landfill pickups through scheduled collection."></textarea>
          </div>

          <!-- Card 3 -->
          <div class="rounded-2xl p-5 border border-slate-200 bg-white/70">
            <p class="text-slate-900 font-semibold mb-3">
              <span class="text-[11px] font-extrabold text-slate-500 uppercase block">Reason 3</span>
              To generate income for the Student Council.
            </p>
            <textarea id="input-3" rows="3" class="w-full border border-slate-300 rounded-2xl p-4 bg-white" placeholder="Write your Method (How)‚Ä¶ e.g., By selling sorted recyclables to a partner company and recording profit monthly."></textarea>
          </div>
        </div>

        <!-- Submit panel -->
        <div class="mt-7 rounded-2xl p-6 text-white bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700">
          <div class="flex flex-wrap items-center justify-between gap-3 mb-5">
            <h3 class="grotesk text-xl font-bold">Submit Your Work</h3>
            <span class="text-xs text-slate-300">Tip: keep each method = 1‚Äì2 sentences, action-focused.</span>
          </div>

          <div class="grid md:grid-cols-2 gap-4 mb-5">
            <div>
              <label class="block text-xs text-slate-300 mb-1">Name</label>
              <input type="text" id="student-name" class="w-full bg-white/10 border border-slate-600 rounded-2xl p-3 text-white placeholder:text-slate-400" placeholder="e.g., Aina"/>
            </div>
            <div>
              <label class="block text-xs text-slate-300 mb-1">Class</label>
              <input type="text" id="student-class" class="w-full bg-white/10 border border-slate-600 rounded-2xl p-3 text-white placeholder:text-slate-400" placeholder="e.g., 6A"/>
            </div>
          </div>

          <button onclick="submitToGoogleSheet()" id="submit-btn" class="btn w-full bg-gradient-to-r from-teal-500 to-indigo-500 hover:opacity-95 text-white font-extrabold py-4 rounded-2xl">
            Submit Assignment üöÄ
          </button>

          <div id="submit-status" class="hidden mt-4 text-center p-3 rounded-2xl bg-white/10 border border-slate-600"></div>

          <p class="mt-4 text-xs text-slate-300">
            Teacher note: paste your Apps Script web app URL into <span class="font-mono text-slate-200">GOOGLE_SCRIPT_URL</span>.
          </p>
        </div>
      </div>
    </section>
  </main>

  <script>
    // --- PASTE YOUR GOOGLE LINK BELOW ---
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyrG3UtGGhpNGfX0OMaK2CjAigehXxSkldvZJClXVrIBH9JevNMg4aU4IzCUpb5C-3_/exec";
    // Example: https://script.google.com/macros/s/XXXX/exec
    // ------------------------------------

    const questions = [
      { text: "Schools organize a 'Green Day' every Friday where students bring their own food containers.", type: "Method", explanation: "This describes a specific action/event." },
      { text: "Trees are planted around the school compound to provide shade and lower the temperature.", type: "Method", explanation: "This describes the physical action." },
      { text: "The headmaster signs a contract with a local recycling company.", type: "Method", explanation: "This describes a procedural step." },
      { text: "Reducing paper usage is important because it conserves forest resources.", type: "Reason", explanation: "This explains the logic or benefit." },
      { text: "Students are required to wash and dry their plastic bottles.", type: "Method", explanation: "This describes physical steps." },
      { text: "The government implements a 'No Plastic Bag' policy.", type: "Method", explanation: "This describes policy implementation." },
      { text: "Canteen workers separate organic food scraps into a designated bin.", type: "Method", explanation: "This describes the process." },
      { text: "It is necessary to educate the youth so they become responsible citizens.", type: "Reason", explanation: "This is a justification." },
      { text: "A digital scoreboard is used to track the weight of recycled materials.", type: "Method", explanation: "This describes the tool used." },
      { text: "Schools save money on waste disposal fees by reducing rubbish.", type: "Reason", explanation: "This highlights a financial benefit." }
    ];

    let currentQIndex = 0, score = 0;

    function setProgress() {
      const pct = ((currentQIndex + 1) / questions.length) * 100;
      document.getElementById('progress-bar').style.width = `${pct}%`;
      document.getElementById('q-current').innerText = currentQIndex + 1;
    }

    function resetFeedbackStyles(fb) {
      fb.className = "hidden mt-7 w-full max-w-xl p-4 rounded-2xl text-left border";
    }

    function loadQuestion() {
      const q = questions[currentQIndex];

      const fb = document.getElementById('feedback');
      resetFeedbackStyles(fb);

      document.getElementById('next-btn').classList.add('hidden');
      document.getElementById('question-text').innerText = q.text;

      // re-enable buttons
      const buttons = document.getElementById('options-container').getElementsByTagName('button');
      for (let btn of buttons) {
        btn.disabled = false;
        btn.classList.remove('opacity-50');
      }

      setProgress();
    }

    function popConfetti() {
      const root = document.createElement('div');
      root.className = 'confetti';
      const colors = ["#14b8a6","#6366f1","#f472b6","#f59e0b","#22c55e","#0ea5e9"];

      for (let i = 0; i < 35; i++) {
        const piece = document.createElement('i');
        piece.style.left = Math.random() * 100 + "vw";
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        piece.style.transform = `rotate(${Math.random()*360}deg)`;
        piece.style.animationDuration = (0.9 + Math.random() * 0.8) + "s";
        piece.style.width = (8 + Math.random() * 6) + "px";
        piece.style.height = (12 + Math.random() * 14) + "px";
        root.appendChild(piece);
      }

      document.body.appendChild(root);
      setTimeout(() => root.remove(), 1700);
    }

    function checkAnswer(selected) {
      const q = questions[currentQIndex];
      const isCorrect = selected === q.type;

      // disable buttons
      const buttons = document.getElementById('options-container').getElementsByTagName('button');
      for (let btn of buttons) {
        btn.disabled = true;
        btn.classList.add('opacity-50');
      }

      const fb = document.getElementById('feedback');
      resetFeedbackStyles(fb);
      fb.classList.remove('hidden');

      // always show score chip once quiz starts
      const scoreChip = document.getElementById('score-display');
      scoreChip.classList.remove('hidden');

      if (isCorrect) {
        score++;
        scoreChip.innerText = `Score: ${score}/10`;
        fb.classList.add("bg-emerald-50", "border-emerald-200");
        fb.innerHTML = `<p class="font-extrabold text-emerald-800">Correct ‚úÖ</p>
                        <p class="text-sm text-emerald-700 mt-1">${q.explanation}</p>`;
      } else {
        // shake container for a quick ‚Äúoops‚Äù
        document.getElementById('question-container').classList.add('shake');
        setTimeout(() => document.getElementById('question-container').classList.remove('shake'), 280);

        fb.classList.add("bg-rose-50", "border-rose-200");
        fb.innerHTML = `<p class="font-extrabold text-rose-800">Not quite üòÖ</p>
                        <p class="text-sm text-rose-700 mt-1">Correct answer: <span class="font-semibold">${q.type}</span>. ${q.explanation}</p>`;
      }

      document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
      currentQIndex++;
      if (currentQIndex < questions.length) {
        loadQuestion();
      } else {
        document.getElementById('question-container').classList.add('hidden');
        document.getElementById('quiz-end').classList.remove('hidden');
        document.getElementById('final-score').innerText = score;
        document.getElementById('progress-bar').style.width = "100%";
        popConfetti();
      }
    }

    function scrollToWriting() {
      document.getElementById('writing-section').scrollIntoView({ behavior: 'smooth' });
    }

    function submitToGoogleSheet() {
      const btn = document.getElementById('submit-btn');
      const statusDiv = document.getElementById('submit-status');

      const name = document.getElementById('student-name').value.trim();
      const sClass = document.getElementById('student-class').value.trim();

      if (!GOOGLE_SCRIPT_URL) {
        alert("Error: Teacher has not set the Google Script URL.");
        return;
      }
      if (!name || !sClass) {
        alert("Please enter Name and Class.");
        return;
      }

      btn.disabled = true;
      btn.innerHTML = '<span class="loader mr-2"></span> Submitting...';

      const params = new URLSearchParams();
      params.append('name', name);
      params.append('class', sClass);
      params.append('score', `${score}/10`);
      params.append('method1', document.getElementById('input-1').value.trim());
      params.append('method2', document.getElementById('input-2').value.trim());
      params.append('method3', document.getElementById('input-3').value.trim());

      fetch(GOOGLE_SCRIPT_URL, { method: 'POST', body: params })
        .then(() => {
          btn.innerHTML = 'Submitted ‚úÖ';
          statusDiv.classList.remove('hidden');
          statusDiv.innerHTML = '<span class="text-emerald-300 font-bold">Success!</span> Sent to teacher.';
          popConfetti();
        })
        .catch(() => {
          btn.disabled = false;
          btn.innerHTML = 'Try Again';
          statusDiv.classList.remove('hidden');
          statusDiv.innerHTML = '<span class="text-rose-300">Error.</span> Check internet connection / script URL.';
        });
    }

    // init
    loadQuestion();
  </script>
</body>
</html>
